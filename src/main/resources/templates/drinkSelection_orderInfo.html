<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" th:href="@{/css/drinkSelection_orderInfo.css}">
</head>
<style>

</style>

<body>
    <div class="M-drink-selection">
        <section class="M-sec-left">
            <div id="category">
                <div class="M-category-button">
                    <div style="display: flex;">
                        <button id="allDrinks" onclick="fetchFoods_DrinkByCategory(this)" th:value="0">
                            <Strong class="ctg-text-see-all-button">Category
                                <div>click to see all drinks</div>
                            </Strong>
                        </button>

                        <button onclick="viewAllCategory(this)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor" class="w-6 h-6">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5" />
                            </svg>
                        </button>
                    </div>
                    <div class="M-food-drink-ctg-wrapper">

                        <button onclick="fetchCategoryData(this)" th:value="drink" id="drink-category-button">
                            <strong>Drinks</strong>
                            <svg style="rotate: 360deg;width: fit-content;height: 1.7rem;" version="1.0"
                                xmlns="http://www.w3.org/2000/svg" width="128.000000pt" height="128.000000pt"
                                viewBox="0 0 128.000000 128.000000" preserveAspectRatio="xMidYMid meet">
                                <g transform="translate(0.000000,128.000000) scale(0.100000,-0.100000)" fill="#000000"
                                    stroke="none">
                                    <path
                                        d="M828 1263 c-9 -10 -22 -37 -29 -60 -7 -24 -15 -43 -18 -43 -3 1 -31   9 -61 20 -101 36 -213 19 -307 -46 -63 -44 -126 -132 -143 -203 -7 -30 -18   -51 -25 -51 -8 0 -27 -11 -42 -24 -26 -22 -28 -30 -28 -96 0 -66 2 -74 28 -96   15 -13 35 -24 43 -24 8 0 14 -1 14 -2 0 -2 18 -142 39 -312 27 -213 43 -311   53 -317 17 -11 509 -11 526 0 10 6 26 104 53 317 21 170 39 310 39 312 0 1 6   2 14 2 8 0 28 11 43 24 26 22 28 30 28 96 0 66 -2 74 -28 96 -15 13 -34 24   -41 24 -7 0 -20 26 -29 58 -9 34 -33 82 -57 113 -45 60 -44 57 -28 110 l11 39   93 0 c112 0 124 4 124 40 0 16 -7 30 -16 34 -9 3 -66 6 -128 6 -95 0 -115 -3   -128 -17z m-123 -162 c32 -12 49 -23 46 -32 -2 -8 -6 -33 -8 -55 -5 -37 -3   -43 17 -49 24 -7 60 18 60 42 0 8 5 11 11 7 13 -7 59 -103 59 -121 0 -10 -62   -13 -275 -13 l-275 0 6 28 c28 116 147 211 264 211 25 0 68 -8 95 -18z m265   -341 l0 -40 -355 0 -355 0 0 40 0 40 355 0 355 0 0 -40z m-84 -157 c-3 -21   -17 -130 -31 -243 -14 -113 -28 -222 -31 -242 l-6 -38 -203 0 -203 0 -6 38   c-3 20 -17 129 -31 242 -14 113 -28 222 -31 243 l-6 37 277 0 277 0 -6 -37z" />
                                </g>
                            </svg></button>
                        <button onclick="fetchCategoryData(this)" th:value="food">
                            <strong>Foods</strong>
                            <svg style="width: fit-content; rotate: 360deg; height: 2rem;" version="1.0"
                                xmlns="http://www.w3.org/2000/svg" width="128.000000pt" height="128.000000pt"
                                viewBox="0 0 128.000000 128.000000" preserveAspectRatio="xMidYMid meet">

                                <g transform="translate(0.000000,128.000000) scale(0.100000,-0.100000)" fill="#000000"
                                    stroke="none">
                                    <path
                                        d="M7 1084 c-4 -4 -7 -70 -7 -147 l0 -139 30 -28 30 -28 0 -260 c0 -224 2 -263 16 -276 20 -20 48 -20 68 0 14 13 16 52 16 276 l0 260 30 28 31 29 -3 143 c-3 119 -5 143 -18 143 -12 0 -16 -18 -18 -87 -1 -49 -7 -88 -12 -88 -5 0 -11 39 -12 88 -2 69 -6 87 -18 87 -12 0 -16 -18 -18 -87 -1 -49 -7 -88 -12 -88 -5 0 -11 39 -12 88 -2 69 -6 87 -18 87 -12 0 -16 -18 -18 -87 -1 -49 -7 -88 -12 -88 -5 0 -11 39 -12 87 -3 79 -12 106 -31 87z m173 -242 c0 -39 -17 -52 -70 -52 -53 0 -70 13 -70 52 0 28 0 28 70 28 70 0 70 0 70 -28z m-60 -352 c0 -167 -4 -260 -10 -260 -6 0 -10 93 -10 260 0 167 4 260 10 260 6 0 10 -93 10 -260z" />
                                    <path
                                        d="M538 1075 c-82 -22 -141 -57 -204 -119 -258 -258 -117 -696 245 -758 189 -32 383 67 470 240 88 175 56 379 -83 518 -116 115 -278 161 -428 119z m216 -40 c77 -20 133 -54 193 -118 152 -162 149 -403 -9 -563 -232 -237 -635 -107 -691 222 -21 124 17 246 106 341 108 115 251 157 401 118z" />
                                    <path
                                        d="M570 941 c-86 -28 -160 -91 -201 -171 -33 -64 -33 -184 -1 -256 29 -64 92 -126 157 -156 70 -32 180 -32 250 0 114 52 179 154 179 282 1 124 -59 221 -169 277 -53 28 -166 40 -215 24z m212 -68 c154 -86 182 -297 57 -422 -126 -126 -334 -97 -423 59 -27 48 -31 65 -31 130 0 65 4 82 31 130 32 57 97 111 158 130 57 17 150 5 208 -27z" />
                                    <path
                                        d="M1127 1083 c-4 -3 -7 -199 -7 -434 0 -375 2 -429 16 -443 20 -20 48 -20 68 0 13 13 16 45 16 199 l0 184 28 3 27 3 3 195 c2 180 1 198 -18 228 -31 51 -109 89 -133 65z m99 -84 c10 -21 14 -70 14 -199 l0 -170 -40 0 -40 0 0 210 0 210 26 -12 c14 -7 32 -24 40 -39z m-46 -589 c0 -113 -4 -180 -10 -180 -6 0 -10 67 -10 180 0 113 4 180 10 180 6 0 10 -67 10 -180z" />
                                </g>
                            </svg>

                        </button>
                    </div>
                </div>



                <!-- get category -->
                <div class="M-categoryList-wrapper">
                    <div id="categoryList">
                        <div th:replace="~{fragments/CategoryData :: category_data}"></div>
                    </div>
                </div>
            </div>
            <hr>

            <!-- get drink belong to the selected category -->
            <div id="category-data">
                <div th:replace="~{fragments/Drink_FoodData :: drink_food}"></div>
            </div>
        </section>

        <section class="M-sec-right">
            <Strong>Order Information</Strong>


            <!------ order information------->
            <div style="width: 100%; height: 100%;" id="orderInfomation">
                <div th:replace="~{fragments/OrderDetail :: orderDetail_of_table}"></div>
            </div>
        </section>
    </div>

    <script>
        const CategoryList = document.getElementById("categoryList");
        let isToggle = false;
        function viewAllCategory(node) {
            if (isToggle) {
                CategoryList.classList.remove("M-classList-toggle");
                node.classList.remove("M-rotate-ctg-up");
                node.classList.add("M-rotate-ctg-down");
            } else {
                CategoryList.classList.add("M-classList-toggle");
                node.classList.add("M-rotate-ctg-up");

                if (node.classList.contains("M-rotate-ctg-down")) {
                    node.classList.remove("M-rotate-ctg-down");
                }
            }
            isToggle = !isToggle;
        }


        const thisPageURL = window.location.href;

        let previosSelectedCategory = document.getElementById("drink-category-button");
        previosSelectedCategory.classList.add("CTG-on-hover")
        function fetchCategoryData(node) {
            if (previosSelectedCategory == node) return;

            fetch(thisPageURL + "/get-category?ctg_name=" + node.value).then(async (res) => {
                const data = await res.text();
                // console.log(data);
                CategoryList.innerHTML = data;
                fetchFoods_DrinkByCategory(allDrinks);
            })
            node.classList.add("CTG-on-hover");
            previosSelectedCategory.classList.remove("CTG-on-hover");
            previosSelectedCategory = node;
        }


        const allDrinks=document.getElementById("allDrinks")

        let previousNode = allDrinks;
        previousNode.classList.add("CTG-on-hover");
        const drinks_ofCTG = document.getElementById("category-data");
        function fetchFoods_DrinkByCategory(node) {
            
            if (previosSelectedCategory.value == "drink") {
                fetch(thisPageURL + "/get-drinks?id=" + node.value).then(async (res) => {
                    const data = await res.text();
                    // console.log(data);
                    drinks_ofCTG.innerHTML = data;
                }).catch((err) => {
                    console.log("oops!!!! someting went wrong!!!!!" + err);
                })

            } else {
                fetch(thisPageURL + "/get-foods?id=" + node.value).then(async (res) => {
                    const data = await res.text();
                    // console.log(data);
                    drinks_ofCTG.innerHTML = data;
                }).catch((err) => {
                    console.log("oops!!!! someting went wrong!!!!!" + err);
                })
            }
            if (previousNode == node) return;

            node.classList.add("CTG-on-hover")
            previousNode.classList.remove("CTG-on-hover")
            previousNode = node
        }



        const orderInfo = document.getElementById("orderInfomation");
        function deleteOrder(node) {
            console.log(node.value);
            fetch(thisPageURL + "/delete-order?id=" + node.value).then(async (res) => {
                const data = await res.text();
                console.log(data);
                orderInfo.innerHTML = data;

            })
        }

    </script>
</body>

</html>